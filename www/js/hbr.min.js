((function(){Ext.setup({onReady:function(){return new HBR.Main}}),Ext.ns("HBR"),HBR.Players=Ext.extend(Ext.Panel,{constructor:function(a){var b,c,d;a==null&&(a={}),c=[],Ext.applyIf(a,{items:c,layout:"hbox"});for(b=1,d=Math.ceil(2+3*Math.random());1<=d?b<=d:b>=d;1<=d?b++:b--)c.push(new Ext.Panel({flex:1,html:"Player "+b}));return HBR.Players.superclass.constructor.call(this,a)}}),Ext.ns("HBR"),HBR.Roller=Ext.extend(Ext.Panel,{constructor:function(a){a==null&&(a={}),Ext.applyIf(a,{html:'<ul class="dice">\n  <li data-count="1">1</li>\n  <li data-count="2">2</li>\n  <li data-count="3">3</li>\n</ul>'}),HBR.Roller.superclass.constructor.call(this,a),this.on("render",function(){return this.el.on("singletap",function(a){var b;b=Ext.fly(a.target);if(b.is("li"))return this.roll(b.getAttribute("data-count"))},this)},this)},rollDie:function(){var a;return a=Math.random(),a<1/3?this.fireEvent("diceroll","but"):1/3<a&&a<2/3?this.fireEvent("diceroll","word"):this.fireEvent("diceroll","and")},roll:function(a){var b,c,d;d=[];for(b=1,c=Number(a);1<=c?b<=c:b>=c;1<=c?b++:b--)d.push(this.rollDie());return d}}),Ext.ns("HBR"),HBR.WordCount=Ext.extend(Ext.Panel,{constructor:function(a){return a==null&&(a={}),Ext.applyIf(a,{cls:"word-count",type:"Words"}),HBR.WordCount.superclass.constructor.call(this,a),this.setCount(0)},addWord:function(){return this.setCount(++this.count)},setCount:function(a){this.count=a,this.update(""+this.count+" "+this.type);if(this.type!=="Word"&&this.count>=4)return this.fireEvent("wordoverflow")}}),Ext.ns("HBR"),HBR.Story=Ext.extend(Ext.Panel,{constructor:function(a){return a==null&&(a={}),Ext.applyIf(a,{html:"Story",layout:"fit"}),HBR.Story.superclass.constructor.call(this,a)}}),Ext.ns("HBR"),HBR.Word=Ext.extend(Ext.form.Text,{constructor:function(a){return a==null&&(a={}),Ext.applyIf(a,{width:220}),HBR.Word.superclass.constructor.call(this,a)}}),Ext.ns("HBR"),HBR.Main=Ext.extend(Ext.Panel,{constructor:function(a){return a==null&&(a={}),this.andCount=new HBR.WordCount({dock:"right",listeners:{wordoverflow:function(){return this.roller.disable()},scope:this},type:"AND"}),this.butCount=new HBR.WordCount({dock:"left",listeners:{wordoverflow:function(){return this.roller.disable()},scope:this},type:"BUT"}),this.wordCount=new HBR.WordCount({dock:"bottom"}),this.roller=new HBR.Roller({dock:"bottom",listeners:{diceroll:function(a){return a==="but"?this.butCount.addWord():a==="and"?this.andCount.addWord():this.wordCount.addWord()},scope:this}}),this.players=new HBR.Players({dock:"top"}),this.story=new HBR.Story,Ext.applyIf(a,{dockedItems:[this.andCount,this.butCount,this.wordCount,this.roller,this.players],fullscreen:!0,items:this.story,layout:"auto"}),HBR.Main.superclass.constructor.call(this,a)}})})).call(this);